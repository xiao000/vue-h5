webpackJsonp([26],{ChzN:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{inputList:[{val:""},{val:""},{val:""},{val:""},{val:""},{val:""}],CodeAll:"",validCode:"重新发送",disabled:!0,isResend:!1,disableVal:!1,showPositionValue:!1,toastContent:""}},mounted:function(){this.validateBtn()},methods:{keyDown:function(){this.inputList.length>1?this.disabled=!1:this.disabled=!0},nextFocus:function(t,e){var s=document.getElementsByClassName("inputStyle"),n=s[e],a=s[e+1],o=s[e-1];8!=t.keyCode?e<this.inputList.length-1?(this.inputList[e].val.length>=2&&(this.inputList[e].val=this.inputList[e].val.slice(0,1)),a.focus(),this.keyDown()):n.blur():0!=e&&o.focus()},changeValue:function(t){this.inputList[t].val=""},getVal:function(){if(""!=this.CodeAll)this.CodeAll="";else for(var t=0;t<this.inputList.length;t++){var e=this.inputList[t].val;this.CodeAll+=e}var s=this,n={phone:s.$route.params.phone,email:s.$route.params.email,type:s.$route.params.type,code:s.CodeAll,access_token:s.$store.state.user.token};s.$request({method:"POST",url:s.$baseURL+"/personal/check-bind-user-code",data:s.$qs.stringify(n)}).then(function(t){0==t.code?s.$route.params.phone?s.setSubPhone():s.$route.params.email&&s.setSubEmail():(s.showPositionValue=!0,s.toastContent=t.errmsg,s.CodeAll="")}).catch(function(t){console.log(t)})},setSubEmail:function(){var t=this,e={access_token:t.$store.state.user.token,email:t.$route.params.email,code:t.CodeAll};t.$request({method:"POST",url:t.$baseURL+"/personal/bind-email",data:t.$qs.stringify(e)}).then(function(e){0==e.code?t.$router.push("/myDetails"):(t.showPositionValue=!0,t.toastContent=e.errmsg)}).catch(function(t){console.log(t)})},setSubPhone:function(){var t=this,e={access_token:t.$store.state.user.token,phone:t.$route.params.phone,code:t.CodeAll};t.$request({method:"POST",url:t.$baseURL+"/personal/bind-phone",data:t.$qs.stringify(e)}).then(function(e){0==e.code?t.$router.push("/myDetails"):(t.showPositionValue=!0,t.toastContent=e.errmsg)}).catch(function(t){console.log(t)})},resend:function(){var t=this,e={phone:t.$route.params.phone,email:t.$route.params.email,type:t.$route.params.type,sign:t.$store.state.user.sign,timestamp:t.$store.state.user.timestamp,nonce:t.$store.state.user.nonce,access_token:t.$store.state.user.token};t.$request({method:"POST",url:t.$baseURL+"/personal/get-code",data:t.$qs.stringify(e)}).then(function(e){0==e.code?(t.validateBtn(),t.showPositionValue=!0,t.toastContent=e.errmsg):(t.showPositionValue=!0,t.toastContent=e.errmsg)}).catch(function(t){console.log(t)})},validateBtn:function(){var t=this,e=6,s=setInterval(function(){e<=0?(clearInterval(s),t.disableVal=!1,t.isResend=!1,t.validCode="获取验证码"):(t.validCode=e+"秒后重试",t.disableVal=!0,t.isResend=!0,e--)},1e3)}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"validCode"},[s("div",{staticClass:"prTitle fontSize52 marginLr"},[t._v("输入验证码")]),t._v(" "),s("div",{staticClass:"prompt fontSize30 marginL"},[s("span",[t._v("\n      已发送至\n      "),1==this.$route.params.type?s("i",[t._v("\n        手机"+t._s(this.$route.params.phone)+"\n      ")]):s("i",[t._v(" 邮箱"+t._s(this.$route.params.email)+" ")])])]),t._v(" "),s("div",{staticClass:"formMain"},[s("form",{attrs:{action:"",onsubmit:"return false;"}},[t._l(t.inputList,function(e,n){return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"item.val"}],key:n,staticClass:"inputStyle",attrs:{type:"number",maxlength:"1"},domProps:{value:e.val},on:{keyup:function(e){return t.nextFocus(e,n)},input:function(s){s.target.composing||t.$set(e,"val",s.target.value)}}})]}),t._v(" "),s("x-button",{attrs:{"action-type":"button",type:"warn",text:"确认",keyboard:"number",disabled:t.disabled},nativeOn:{click:function(e){return t.getVal(e)}}}),t._v(" "),s("div",{staticStyle:{"text-align":"left"}},[s("p",{class:["fontSize30",{resendCode:t.isResend,disable:t.disableVal}],on:{click:t.resend}},[t._v("\n          "+t._s(t.validCode)+"\n        ")])])],2)]),t._v(" "),s("toast",{attrs:{type:"text","is-show-mask":"",text:t.toastContent,position:"middle"},model:{value:t.showPositionValue,callback:function(e){t.showPositionValue=e},expression:"showPositionValue"}})],1)},staticRenderFns:[]};var o=s("VU/8")(n,a,!1,function(t){s("fEsN")},"data-v-c2581e0a",null);e.default=o.exports},fEsN:function(t,e){}});
//# sourceMappingURL=26.597d48ef296d6c84cab8.js.map